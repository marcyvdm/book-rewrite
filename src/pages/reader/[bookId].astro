---
import Layout from '../../layouts/Layout.astro';
import EnhancedBookReader from '../../components/reader/EnhancedBookReader';

export async function getStaticPaths() {
  // Return paths for our enhanced chapters
  return [
    { params: { bookId: 'game-feel' } },
    { params: { bookId: 'chapter-01' } },
    { params: { bookId: 'chapter-04' } }
  ];
}

const { bookId } = Astro.params;

// Map bookId to chapter if it's a specific chapter
const chapterId = bookId === 'chapter-01' ? 'chapter-01' : 
                  bookId === 'chapter-04' ? 'chapter-04' : 
                  undefined;
---

<Layout title={`Reading ${bookId === 'game-feel' ? 'Game Feel' : `Chapter ${bookId.split('-')[1]}`}`}>
  <EnhancedBookReader chapterId={chapterId} client:load />
</Layout>